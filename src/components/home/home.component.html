<div class="home-container">
    <div class="hero-section">
      <h1>מערכת ניהול תורנים</h1>
      
      @if (isLoading) {
        <div class="loading">טוען נתונים...</div>
      } 
      @else {
        <div class="next-friday-card">
          <h2>תורנות יום שישי הקרוב</h2>
          <div class="date-display">
            {{ nextFridayDate | date:'dd/MM/yyyy' }}
          </div>
          @if (nextFridayToran) {
            <div class="toran-info">
              <h3>{{ nextFridayToran.name }}</h3>
              @if (nextFridayToran.email) {
                <p>Email: <a href="mailto:{{ nextFridayToran.email }}" style="text-decoration: none;">{{ nextFridayToran.email }}</a></p>
              }
              @if (nextFridayToran.phone) {
                <p>Phone: <a href="tel:{{ nextFridayToran.phone }}" style="text-decoration: none;">{{ nextFridayToran.phone }}</a></p>
              }
            </div>
          <div class="toran-selection">
            <button (click)="openEmployeeModal()" class="action-btn primary" >
              אישור ביצוע התורנות
            </button>
          </div>

          @if(isModalOpen){
          <div class="employee-modal">
            <div class="modal-content" >
              <div>
              <h4> בחר תורן</h4>
              <select [(ngModel)]="selectedToranName" class="selection" >
                @for (e of employees; track e.name) {
                  <option [value]="e.name">{{ e.name }}</option>
                }
              </select>
              </div>
              <button (click)="confirmSelection()" class="action-btn success" style="margin: 2px;">
                אישור
              </button>
              <button (click)="closeModal()" class="action-btn success" style="margin: 2px;">
                ביטול
              </button>
            </div>
          </div>
        
         @if(selectionMessage){
          <div class="success-message">
            {{ selectionMessage }}
          </div>
      }
      }
          @else {
            <p>אין תורן מוגדר ליום שישי הקרוב.</p>
          }
      }

      @if (errorMessage) {
        <div class="error-message">
          {{ errorMessage }}
        </div>
      }
    </div>

    <div class="quick-actions">
      <h3>פעולות מהירות</h3>
      <div class="action-buttons">
        <a routerLink="/toranim" class="action-btn primary">
          ניהול תורנים
        </a>
        <a routerLink="/schedule" class="action-btn secondary">
          צפייה בלוח התורנויות
        </a>
      </div>
    </div>
  }
  <router-outlet></router-outlet>
